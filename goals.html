<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Goals - PiggyPal</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/goals.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="./assets/images/piggypal-logo.svg" alt="PiggyPal Logo">
            <h1>PiggyPal</h1>
        </div>
        <nav>
            <button class="mobile-menu-btn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="expenses.html">Expenses</a></li>
                <li><a href="tips.html">Saving Tips</a></li>
                <li><a href="budget.html">Budget</a></li>
                <li><a href="goals.html" class="active">Goals</a></li>
                <li><a href="help.html">Help/FAQ</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="page-header">
            <h2>Financial Goals</h2>
            <p>Set, track, and achieve your savings targets</p>
        </section>

        <section class="goals-summary">
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="summary-details">
                        <h4>Active Goals</h4>
                        <p id="activeGoalsCount">0</p>
                    </div>
                </div>
                
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="summary-details">
                        <h4>Completed Goals</h4>
                        <p id="completedGoalsCount">0</p>
                    </div>
                </div>
                
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="summary-details">
                        <h4>Total Saved</h4>
                        <p id="totalSavedAmount">$0.00</p>
                    </div>
                </div>
                
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="summary-details">
                        <h4>Next Goal</h4>
                        <p id="nextGoalDate">None</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="create-goal">
            <div class="card">
                <div class="card-header">
                    <h3>Create New Goal</h3>
                    <i class="fas fa-plus-circle"></i>
                </div>
                <div class="card-body">
                    <form id="createGoalForm" class="goal-form">
                        <div class="form-group">
                            <label for="goalTitle">Goal Title</label>
                            <input type="text" id="goalTitle" name="goalTitle" placeholder="e.g., New Headphones" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="goalAmount">Target Amount</label>
                                <div class="input-with-icon">
                                    <span class="currency-symbol">$</span>
                                    <input type="number" id="goalAmount" name="goalAmount" min="1" step="1" placeholder="0" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="goalDate">Target Date</label>
                                <input type="date" id="goalDate" name="goalDate" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="goalCategory">Category</label>
                            <select id="goalCategory" name="goalCategory" required>
                                <option value="" disabled selected>Select a category</option>
                                <option value="electronics">Electronics</option>
                                <option value="clothing">Clothing</option>
                                <option value="entertainment">Entertainment</option>
                                <option value="education">Education</option>
                                <option value="travel">Travel</option>
                                <option value="gift">Gift for Someone</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="initialDeposit">Initial Deposit (Optional)</label>
                            <div class="input-with-icon">
                                <span class="currency-symbol">$</span>
                                <input type="number" id="initialDeposit" name="initialDeposit" min="0" step="1" placeholder="0">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="goalNotes">Notes (Optional)</label>
                            <textarea id="goalNotes" name="goalNotes" placeholder="Add any additional details about your goal"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="reset" class="btn secondary">Clear</button>
                            <button type="submit" class="btn primary">Create Goal</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section class="goals-tracker">
            <div class="goals-header">
                <h2>Your Goals</h2>
                <div class="goals-filter">
                    <button class="filter-btn active" data-filter="active">Active</button>
                    <button class="filter-btn" data-filter="completed">Completed</button>
                    <button class="filter-btn" data-filter="all">All</button>
                </div>
            </div>
            
            <div class="goals-container" id="goalsContainer">
                <!-- Goals will be populated by JavaScript -->
                <div class="no-data-message" id="noGoalsMessage">
                    <i class="fas fa-bullseye"></i>
                    <p>No goals set yet.</p>
                    <p>Create your first savings goal using the form above!</p>
                </div>
            </div>
        </section>

        <section class="goal-calculator">
            <div class="calculator-container">
                <div class="calculator-content">
                    <h3>Savings Goal Calculator</h3>
                    <p>Find out how much you need to save regularly to reach your goal</p>
                    <form id="goalCalculatorForm">
                        <div class="form-group">
                            <label for="calcGoalAmount">Goal Amount</label>
                            <div class="input-with-icon">
                                <span class="currency-symbol">$</span>
                                <input type="number" id="calcGoalAmount" min="1" step="1" placeholder="0" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="calcTimeframe">Timeframe</label>
                            <div class="timeframe-inputs">
                                <input type="number" id="calcTimeframe" min="1" step="1" placeholder="0" required>
                                <select id="calcTimeUnit">
                                    <option value="weeks">Weeks</option>
                                    <option value="months" selected>Months</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="calcInitialAmount">Initial Amount (Optional)</label>
                            <div class="input-with-icon">
                                <span class="currency-symbol">$</span>
                                <input type="number" id="calcInitialAmount" min="0" step="1" placeholder="0">
                            </div>
                        </div>
                        
                        <button type="button" id="calculateSavingsBtn" class="btn primary">Calculate</button>
                    </form>
                    
                    <div id="calculationResult" class="calculation-result">
                        <div class="result-card">
                            <h4>To reach your goal:</h4>
                            <div class="result-item">
                                <span>Save weekly:</span>
                                <span id="weeklyAmount">$0.00</span>
                            </div>
                            <div class="result-item">
                                <span>Save monthly:</span>
                                <span id="monthlyAmount">$0.00</span>
                            </div>
                            <div class="result-item">
                                <span>Target date:</span>
                                <span id="targetDate">-</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="calculator-image">
                    <img src="./assets/images/savings-calculator.svg" alt="Savings Calculator Illustration">
                </div>
            </div>
        </section>

        <section class="goal-milestones">
            <h2>Goal Milestones</h2>
            <div class="milestones-timeline" id="milestonesTimeline">
                <!-- Milestones will be populated by JavaScript -->
                <div class="no-data-message">
                    <i class="fas fa-map-signs"></i>
                    <p>No goal milestones to display.</p>
                    <p>Create and progress on goals to see your achievements here!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Goal Details Modal -->
    <div class="modal" id="goalDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalGoalTitle">Goal Details</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="goal-details">
                    <div class="goal-progress-container">
                        <div class="goal-progress-circle">
                            <svg width="150" height="150" viewBox="0 0 150 150">
                                <circle cx="75" cy="75" r="65" fill="none" stroke="#e6e6e6" stroke-width="10"/>
                                <circle cx="75" cy="75" r="65" fill="none" stroke="#4CAF50" stroke-width="10" 
                                        stroke-dasharray="408" stroke-dashoffset="408" id="goalProgressCircle"/>
                            </svg>
                            <div class="goal-progress-text">
                                <span id="goalProgressPercentage">0%</span>
                            </div>
                        </div>
                        <div class="goal-amounts">
                            <div class="amount-item">
                                <span>Saved:</span>
                                <span id="goalSavedAmount">$0.00</span>
                            </div>
                            <div class="amount-item">
                                <span>Target:</span>
                                <span id="goalTargetAmount">$0.00</span>
                            </div>
                            <div class="amount-item">
                                <span>Remaining:</span>
                                <span id="goalRemainingAmount">$0.00</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="goal-info">
                        <div class="info-item">
                            <i class="fas fa-calendar-alt"></i>
                            <div>
                                <span class="info-label">Target Date:</span>
                                <span id="goalTargetDate">-</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-hourglass-half"></i>
                            <div>
                                <span class="info-label">Time Remaining:</span>
                                <span id="goalTimeRemaining">-</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-tag"></i>
                            <div>
                                <span class="info-label">Category:</span>
                                <span id="goalCategoryDisplay">-</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-sticky-note"></i>
                            <div>
                                <span class="info-label">Notes:</span>
                                <span id="goalNotesDisplay">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="goal-actions">
                        <button id="addDepositBtn" class="btn primary">Add Deposit</button>
                        <button id="editGoalBtn" class="btn secondary">Edit Goal</button>
                        <button id="deleteGoalBtn" class="btn danger">Delete Goal</button>
                    </div>
                    
                    <div class="goal-history">
                        <h4>Deposit History</h4>
                        <div class="deposit-history" id="depositHistory">
                            <!-- Deposit history will be populated by JavaScript -->
                            <p class="no-deposits-message">No deposits made yet.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Deposit Modal -->
    <div class="modal" id="addDepositModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Deposit</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addDepositForm">
                    <input type="hidden" id="depositGoalId">
                    <div class="form-group">
                        <label for="depositAmount">Deposit Amount</label>
                        <div class="input-with-icon">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="depositAmount" min="1" step="1" placeholder="0" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="depositDate">Date</label>
                        <input type="date" id="depositDate" required>
                    </div>
                    <div class="form-group">
                        <label for="depositNotes">Notes (Optional)</label>
                        <textarea id="depositNotes" placeholder="Add any notes about this deposit"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn primary">Add Deposit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Goal Modal -->
    <div class="modal" id="editGoalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Goal</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editGoalForm" class="goal-form">
                    <input type="hidden" id="editGoalId">
                    <div class="form-group">
                        <label for="editGoalTitle">Goal Title</label>
                        <input type="text" id="editGoalTitle" name="editGoalTitle" placeholder="e.g., New Headphones" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editGoalAmount">Target Amount</label>
                            <div class="input-with-icon">
                                <span class="currency-symbol">$</span>
                                <input type="number" id="editGoalAmount" name="editGoalAmount" min="1" step="1" placeholder="0" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="editGoalDate">Target Date</label>
                            <input type="date" id="editGoalDate" name="editGoalDate" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editGoalCategory">Category</label>
                        <select id="editGoalCategory" name="editGoalCategory" required>
                            <option value="electronics">Electronics</option>
                            <option value="clothing">Clothing</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="education">Education</option>
                            <option value="travel">Travel</option>
                            <option value="gift">Gift for Someone</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="editGoalNotes">Notes (Optional)</label>
                        <textarea id="editGoalNotes" name="editGoalNotes" placeholder="Add any additional details about your goal"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="./assets/images/piggypal-logo.svg" alt="PiggyPal Logo">
                <h2>PiggyPal</h2>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h3>Pages</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="expenses.html">Expenses</a></li>
                        <li><a href="tips.html">Saving Tips</a></li>
                        <li><a href="budget.html">Budget</a></li>
                        <li><a href="goals.html">Goals</a></li>
                        <li><a href="help.html">Help/FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Features</h3>
                    <ul>
                        <li><a href="expenses.html">Expense Tracking</a></li>
                        <li><a href="budget.html">Budget Planning</a></li>
                        <li><a href="goals.html">Savings Goals</a></li>
                        <li><a href="tips.html">Financial Tips</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 PiggyPal. All rights reserved.</p>
            <p>A static frontend project for pocket money management.</p>
        </div>
    </footer>

    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <div class="toast-message">Goal created successfully!</div>
        </div>
        <div class="toast-progress"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/common.js"></script>
    <script src="./js/storage.js"></script>
    <script src="./js/goals.js"></script>
</body>
</html>